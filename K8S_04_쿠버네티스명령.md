# A. ì¿ ë²„ë„¤í‹°ìŠ¤ëª…ë ¹

## 1. ğŸ“¦ ê¸°ë³¸ ì •ë³´ ì¡°íšŒ
| ëª…ë ¹ì–´                       | ì„¤ëª…                 |
| ------------------------- | ------------------ |
| `kubectl version --short` | í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ë²„ì „ í™•ì¸     |
| `kubectl cluster-info`    | í´ëŸ¬ìŠ¤í„° ì •ë³´ í™•ì¸         |
| `kubectl get nodes`       | í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ ëª©ë¡ í™•ì¸     |
| `kubectl get pods`        | ëª¨ë“  Pod ëª©ë¡ ì¡°íšŒ       |
| `kubectl get svc`         | ì„œë¹„ìŠ¤(Service) ëª©ë¡ í™•ì¸ |
| `kubectl get deployments` | ë°°í¬ ì •ë³´ í™•ì¸           |

## 2. ğŸ“‚ ë¦¬ì†ŒìŠ¤ ì¡°íšŒ (get)
```bash
kubectl get [ë¦¬ì†ŒìŠ¤íƒ€ì…] [ì´ë¦„] -n [ë„¤ì„ìŠ¤í˜ì´ìŠ¤]
```
| ì˜ˆì‹œ                              | ì„¤ëª…                  |
| ------------------------------- | ------------------- |
| `kubectl get pods`              | í˜„ì¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ëª¨ë“  íŒŒë“œ    |
| `kubectl get pods -A`           | ì „ì²´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ       |
| `kubectl get pod mypod -o yaml` | íŒŒë“œì˜ ìƒì„¸ ì„¤ì • ë³´ê¸° (YAML) |
| `kubectl describe pod mypod`    | ì´ë²¤íŠ¸ ë° ìƒì„¸ ìƒíƒœ ì •ë³´      |

## 3. ğŸ”§ ë¦¬ì†ŒìŠ¤ ìƒì„± (create/apply)
| ëª…ë ¹ì–´                           | ì„¤ëª…                         |
| ----------------------------- | -------------------------- |
| `kubectl create -f file.yaml` | YAML íŒŒì¼ë¡œ ë¦¬ì†ŒìŠ¤ ìƒì„±            |
| `kubectl apply -f file.yaml`  | ì„ ì–¸ì  ì„¤ì • ì ìš© (ìˆìœ¼ë©´ ìˆ˜ì •, ì—†ìœ¼ë©´ ìƒì„±) |

## 4. ğŸ—‘ï¸ ë¦¬ì†ŒìŠ¤ ì‚­ì œ (delete)
| ëª…ë ¹ì–´                            | ì„¤ëª…               |
| ------------------------------ | ---------------- |
| `kubectl delete pod mypod`     | íŠ¹ì • íŒŒë“œ ì‚­ì œ         |
| `kubectl delete -f file.yaml`  | YAMLë¡œ ì •ì˜ëœ ë¦¬ì†ŒìŠ¤ ì‚­ì œ |
| `kubectl delete svc myservice` | ì„œë¹„ìŠ¤ ì‚­ì œ           |

## 5. âš™ï¸ ë””ë²„ê¹… ë° ì§„ë‹¨
| ëª…ë ¹ì–´                               | ì„¤ëª…                   |
| --------------------------------- | -------------------- |
| `kubectl logs [podëª…]`             | íŒŒë“œ ë¡œê·¸ ë³´ê¸°             |
| `kubectl logs [podëª…] -c [ì»¨í…Œì´ë„ˆëª…]`  | ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ íŒŒë“œì˜ ë¡œê·¸       |
| `kubectl exec -it [podëª…] -- bash` | íŒŒë“œ ë‚´ë¶€ ì ‘ì† (ì‰˜ ì‹¤í–‰)      |
| `kubectl top node`                | ë…¸ë“œì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰(CPU/ë©”ëª¨ë¦¬) |
| `kubectl top pod`                 | íŒŒë“œì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰          |

## 6. ğŸ“¦ ë°°í¬ ê´€ë ¨
| ëª…ë ¹ì–´                                                | ì„¤ëª…          |
| -------------------------------------------------- | ----------- |
| `kubectl rollout status deployment/[ì´ë¦„]`           | ë°°í¬ ì§„í–‰ ìƒíƒœ í™•ì¸ |
| `kubectl rollout restart deployment [ì´ë¦„]`          | ë””í”Œë¡œì´ ì¬ì‹œì‘    |
| `kubectl scale deployment [ì´ë¦„] --replicas=3`       | ë³µì œ ìˆ˜ ì¡°ì ˆ     |
| `kubectl set image deployment/[ë””í”Œë¡œì´] [ì»¨í…Œì´ë„ˆ]=[ì´ë¯¸ì§€]` | ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸    |

## 7. ğŸ§ª í…ŒìŠ¤íŠ¸ ë° ì‹¤ìŠµìš©
| ëª…ë ¹ì–´                                                                      | ì„¤ëª…                |
| ------------------------------------------------------------------------ | ----------------- |
| `kubectl run test-pod --image=nginx --restart=Never`                     | ì„ì‹œ íŒŒë“œ ì‹¤í–‰          |
| `kubectl expose pod test-pod --port=80 --target-port=80 --type=NodePort` | ì„œë¹„ìŠ¤ë¡œ ë…¸ì¶œ           |
| `kubectl port-forward pod/mypod 8080:80`                                 | ë¡œì»¬ í¬íŠ¸ â†” íŒŒë“œ í¬íŠ¸ í¬ì›Œë”© |

## 8. ğŸ§­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬
| ëª…ë ¹ì–´                                                     | ì„¤ëª…           |
| ------------------------------------------------------- | ------------ |
| `kubectl get ns`                                        | ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ëª©ë¡    |
| `kubectl create ns myns`                                | ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±    |
| `kubectl delete ns myns`                                | ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ    |
| `kubectl config set-context --current --namespace=myns` | ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„¤ì • |

## 9. ğŸ›¡ï¸ ê¶Œí•œ/ì„œë¹„ìŠ¤ ê³„ì • ë“±
| ëª…ë ¹ì–´                                        | ì„¤ëª…        |
| ------------------------------------------ | --------- |
| `kubectl get sa`                           | ì„œë¹„ìŠ¤ ê³„ì • í™•ì¸ |
| `kubectl get clusterrolebinding`           | ê¶Œí•œ ë°”ì¸ë”© í™•ì¸ |
| `kubectl describe clusterrolebinding [ì´ë¦„]` | ë°”ì¸ë”© ìƒì„¸ í™•ì¸ |

## 10. ğŸ” ë¦¬ì†ŒìŠ¤ ì°¾ê¸°/ì •ë ¬/í•„í„°ë§
| ëª…ë ¹ì–´                                                      | ì„¤ëª…           |
| -------------------------------------------------------- | ------------ |
| `kubectl get pods --sort-by=.metadata.name`              | ì´ë¦„ìˆœ ì •ë ¬       |
| `kubectl get pods -o wide`                               | IP, ë…¸ë“œ ì •ë³´ í¬í•¨ |
| `kubectl get pods -l app=myapp`                          | ë¼ë²¨ë¡œ í•„í„°ë§      |
| `kubectl get pods --field-selector=status.phase=Running` | ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œë§Œ ë³´ê¸° |

## 11. ğŸ“ ê¸°íƒ€ ìœ ìš©í•œ ëª…ë ¹
| ëª…ë ¹ì–´                     | ì„¤ëª…                   |
| ----------------------- | -------------------- |
| `kubectl explain pod`   | ë¦¬ì†ŒìŠ¤ ì •ì˜ ì„¤ëª…            |
| `kubectl api-resources` | ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” API ë¦¬ì†ŒìŠ¤ ëª©ë¡  |
| `kubectl config view`   | í˜„ì¬ ì„¤ì •ëœ kubeconfig ë³´ê¸° |

## âœ… ì°¸ê³  : ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ íƒ€ì… ì•½ì–´:
* po = Pod
* svc = Service
* deploy = Deployment
* ns = Namespace
* sa = ServiceAccount

## âœ… 2. ìì£¼ ì“°ëŠ” kubectl ëª…ë ¹ì— ëŒ€í•œ alias ì¶”ê°€ (ì˜êµ¬ ì ìš©)

```bash
sudo vi ~/.bashrc   # ë˜ëŠ” zsh ì‚¬ìš©ìëŠ” ~/.zshrc

# ì•„ë˜ ë‚´ìš© ì¶”ê°€
alias k='kubectl'
alias kgp='kubectl get pods'
alias kgs='kubectl get svc'
alias kgd='kubectl get deployments'
alias kgn='kubectl get nodes'
alias kaf='kubectl apply -f'
alias kdf='kubectl delete -f'
alias kdp='kubectl describe pod'
alias kl='kubectl logs'
alias ke='kubectl exec -it'

# ì €ì¥ í›„ ì ìš©
source ~/.bashrc
```


## ğŸ“Š ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ ë¹„êµí‘œ
| ë¦¬ì†ŒìŠ¤ ì•½ì–´   | ì „ì²´ ì´ë¦„              | ì£¼ìš” ì—­í• /ê¸°ëŠ¥                       | ì–´ë–¤ ë•Œ ì‚¬ìš©í•˜ë‚˜?            | ì˜ˆì‹œ ëª…ë ¹ì–´                                                                    |
| -------- | ------------------ | ------------------------------ | --------------------- | ------------------------------------------------------------------------- |
| `po`     | **Pod**            | ì»¨í…Œì´ë„ˆ 1ê°œ ë˜ëŠ” ì—¬ëŸ¬ ê°œê°€ ì‹¤í–‰ë˜ëŠ” ìµœì†Œ ì‹¤í–‰ ë‹¨ìœ„ | ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ           | `kubectl get po`<br>`kubectl describe po mypod`                           |
| `svc`    | **Service**        | íŒŒë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê³ ì • IP ë° ë¡œë“œë°¸ëŸ°ì‹± ì œê³µ | Pod ê°„ í†µì‹ , ì™¸ë¶€ ë…¸ì¶œ       | `kubectl get svc`<br>`kubectl expose pod mypod --port=80 --type=NodePort` |
| `deploy` | **Deployment**     | íŒŒë“œë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬. ë¡¤ë§ ì—…ë°ì´íŠ¸/ìë™ ë³µêµ¬ ì œê³µ | ì•± ë°°í¬, ë²„ì „ ê´€ë¦¬, ë¬´ì¤‘ë‹¨ ì—…ë°ì´íŠ¸ | `kubectl get deploy`<br>`kubectl create deploy myapp --image=nginx`       |
| `ns`     | **Namespace**      | ë¦¬ì†ŒìŠ¤ë¥¼ ê²©ë¦¬ëœ ê³µê°„ìœ¼ë¡œ êµ¬ë¶„               | íŒ€/í™˜ê²½(ê°œë°œ/ìš´ì˜)ë³„ ë¦¬ì†ŒìŠ¤ ë¶„ë¦¬   | `kubectl get ns`<br>`kubectl create ns dev`                               |
| `sa`     | **ServiceAccount** | íŒŒë“œê°€ API ì„œë²„ì— ì ‘ê·¼í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì¸ì¦ ê³„ì •   | íŒŒë“œì— ê¶Œí•œì„ ë¶€ì—¬í•  ë•Œ         | `kubectl get sa`<br>`kubectl describe sa default`                         |

## ğŸ”— ê´€ê³„ ì˜ˆì‹œ
* Deploymentê°€ ì—¬ëŸ¬ ê°œì˜ Podë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
* ServiceëŠ” ì—¬ëŸ¬ Pod(ë™ì¼ ë ˆì´ë¸”)ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ì°½êµ¬ì…ë‹ˆë‹¤.
* NamespaceëŠ” ìœ„ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” ê²½ê³„ì…ë‹ˆë‹¤.
* ServiceAccountëŠ” Podê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ APIë¥¼ ì‚¬ìš©í•  ë•Œì˜ ì¸ì¦ ì •ë³´ì…ë‹ˆë‹¤.

## ğŸ“ ë¦¬ì†ŒìŠ¤ë³„ YAML ì •ì˜ ì˜ˆì‹œ
### ğŸ“Œ Pod ì˜ˆì‹œ
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: mypod
spec:
  containers:
    - name: nginx
      image: nginx
```

### ğŸ“Œ Service ì˜ˆì‹œ
```yaml
apiVersion: v1
kind: Service
metadata:
  name: myservice
spec:
  selector:
    app: myapp
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
```

### ğŸ“Œ Deployment ì˜ˆì‹œ
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
    spec:
      containers:
        - name: nginx
          image: nginx
```

# B. ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹¤ìŠµ

## 1. ğŸ“¦ ê¸°ë³¸ ëª…ë ¹

```bash
# 1. ì»¨í…Œì´ë„ˆ ì‹¤í–‰
# ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ **nginx ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒŒë“œ(pod)**ë¥¼ ì‹¤í–‰í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ëª…ë ¹
# ë‹¨ì¼ íŒŒë“œë¥¼ ìƒì„±í•˜ë©°, ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment)ëŠ” ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
kubectl run mynginx --image nginx
# pod/mynginx created

# 2 ì»¨í…Œì´ë„ˆ ì¡°íšŒ
kubectl get pod
# NAME      READY   STATUS    RESTARTS   AGE
# mynginx   1/1     Running   0          2s
```

#### âœ… kubectl get podì˜ ì£¼ìš” STATUS ì •ë¦¬
| STATUS                           | ì˜ë¯¸                                                         |
| -------------------------------- | ---------------------------------------------------------- |
| `Pending`                        | Podê°€ ìŠ¤ì¼€ì¤„ë§ ë˜ì—ˆì§€ë§Œ ì•„ì§ Nodeì— í• ë‹¹ë˜ì§€ ì•Šì•˜ê±°ë‚˜, í•„ìš”í•œ ì´ë¯¸ì§€/ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ìš´ë¡œë“œ ì¤‘ì¸ ìƒíƒœ |
| `Running`                        | ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ì‹¤í–‰ ì¤‘ì´ë©° Podê°€ Ready ìƒíƒœì¸ ê²½ìš°                       |
| `Succeeded`                      | ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ì¢…ë£Œë˜ì—ˆê³ , ë‹¤ì‹œ ì‹œì‘ë˜ì§€ ì•Šì„ ì˜ˆì • (ì£¼ë¡œ Jobì—ì„œ ì‚¬ìš©)             |
| `Failed`                         | í•˜ë‚˜ ì´ìƒì˜ ì»¨í…Œì´ë„ˆê°€ ë¹„ì •ìƒ ì¢…ë£Œë˜ê³  ì¬ì‹œì‘í•˜ì§€ ì•ŠìŒ                             |
| `CrashLoopBackOff`               | ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ í›„ ê³§ë°”ë¡œ ê³„ì†í•´ì„œ ì¶©ëŒí•¨ (Crash â†’ Restart ë°˜ë³µ ì¤‘)             |
| `ImagePullBackOff`               | ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•´ ëŒ€ê¸° ì¤‘ (`docker pull` ì‹¤íŒ¨)                  |
| `ErrImagePull`                   | ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨ (ì´ë¯¸ì§€ ì—†ìŒ, ì¸ì¦ ì˜¤ë¥˜ ë“±)                              |
| `ContainerCreating`              | ì»¨í…Œì´ë„ˆ ìƒì„± ì¤‘ (ìŠ¤í† ë¦¬ì§€/ë³¼ë¥¨ ì—°ê²° ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì„¤ì • ë“± í¬í•¨)                     |
| `Terminating`                    | Podê°€ ì‚­ì œ ëª…ë ¹ì„ ë°›ì•˜ê³ , ì¢…ë£Œ ì‘ì—… ì¤‘                                   |
| `Completed`                      | Job ë“±ì—ì„œ ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ì¢…ë£Œëœ ìƒíƒœ (`Succeeded`ì™€ ìœ ì‚¬)                  |
| `NodeAffinity` / `Unschedulable` | ìŠ¤ì¼€ì¤„ë§ ì œì•½ ì¡°ê±´(NodeSelector, Taint ë“±) ë•Œë¬¸ì— ì‹¤í–‰í•  ë…¸ë“œë¥¼ ì°¾ì§€ ëª»í•¨        |

#### âœ… kubectl get podì˜ ì˜µì…˜

1. ì¡°íšŒ ë²”ìœ„ ê´€ë ¨ ì˜µì…˜

| ì˜µì…˜                         | ì„¤ëª…               |
| -------------------------- | ---------------- |
| `-n <namespace>`           | íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ ì¡°íšŒ |
| `-A` ë˜ëŠ” `--all-namespaces` | ì „ì²´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ ì¡°íšŒ |

2. ì¶œë ¥ í¬ë§· ì˜µì…˜

| ì˜µì…˜                                        | ì„¤ëª…                   |
| ----------------------------------------- | -------------------- |
| `-o wide`                                 | ì¶”ê°€ ì •ë³´(IP, Node ë“± í¬í•¨) |
| `-o yaml`                                 | YAML í˜•ì‹ ì¶œë ¥           |
| `-o json`                                 | JSON í˜•ì‹ ì¶œë ¥           |
| `-o jsonpath='{.items[*].metadata.name}'` | jsonpathë¡œ íŠ¹ì • í•„ë“œë§Œ ì¶œë ¥  |
| `--show-labels`                           | íŒŒë“œì— ì„¤ì •ëœ ë¼ë²¨ì„ í•¨ê»˜ í‘œì‹œ    |

3. í•„í„°ë§ ë° ì •ë ¬ ì˜µì…˜

| ì˜µì…˜                     | ì„¤ëª…                    |
| ---------------------- | --------------------- |
| `-l`, `--selector`     | ë¼ë²¨ ì…€ë ‰í„°ë¡œ í•„í„°ë§           |
| `--field-selector`     | í•„ë“œ ì…€ë ‰í„°ë¡œ ìƒíƒœë‚˜ í˜¸ìŠ¤íŠ¸ ë“± í•„í„°ë§ |
| `--sort-by=<jsonpath>` | ì§€ì •ëœ í•„ë“œ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬        |

4. watch / ì‹¤ì‹œê°„ ë³´ê¸°

| ì˜µì…˜              | ì„¤ëª…                        |
| --------------- | ------------------------- |
| `-w`, `--watch` | ì‹¤ì‹œê°„ìœ¼ë¡œ íŒŒë“œ ìƒíƒœ ë³€í™” ëª¨ë‹ˆí„°ë§       |
| `--watch-only`  | ì²« ìƒíƒœëŠ” ìƒëµí•˜ê³  ë³€ê²½ëœ í•­ëª©ë§Œ ì‹¤ì‹œê°„ í‘œì‹œ |

#### ğŸ” ìì„¸í•œ ìƒíƒœ ë³´ê¸°
```bash
# kubectl describe pod <POD_NAME>
kubectl describe pod mynginx
```

#### ğŸ›  ìƒíƒœë³„ ëŒ€ì‘ ìš”ë ¹ ìš”ì•½
| STATUS             | ì¡°ì¹˜ ë°©ì•ˆ                                                 |
| ------------------ | ----------------------------------------------------- |
| `Pending`          | ë…¸ë“œ ìì› ë¶€ì¡± or PVC ë¬¸ì œ í™•ì¸                                 |
| `ImagePullBackOff` | ì´ë¯¸ì§€ ì´ë¦„/ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì£¼ì†Œ í™•ì¸                                    |
| `CrashLoopBackOff` | ë¡œê·¸ í™•ì¸ (`kubectl logs`) í›„ ì—ëŸ¬ ì›ì¸ ìˆ˜ì •                     |
| `ErrImagePull`     | ì´ë¯¸ì§€ ì¡´ì¬ ì—¬ë¶€/ì¸ì¦ í™•ì¸                                       |
| `Terminating`      | ì˜êµ¬ ë³¼ë¥¨ ë“± ì •ë¦¬ ì§€ì—° â†’ ê°•ì œ ì‚­ì œ ê°€ëŠ¥ (`--grace-period=0 --force`) |

#### ğŸ” ì£¼ìš” ì˜µì…˜ ì •ë¦¬
| ì˜µì…˜                         | ì„¤ëª…                                     |
| -------------------------- | -------------------------------------- |
| `-n`, `--namespace`        | íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œë¥¼ ì¡°íšŒí•  ë•Œ ì‚¬ìš©                |
| `--show-events`            | íŒŒë“œì™€ ê´€ë ¨ëœ ì´ë²¤íŠ¸ë¥¼ í•¨ê»˜ ì¶œë ¥ (ê¸°ë³¸ê°’: true)         |
| `--kubeconfig`             | ì‚¬ìš©í•  kubeconfig íŒŒì¼ ê²½ë¡œ ì§€ì •                |
| `-A` ë˜ëŠ” `--all-namespaces` | ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ìŒ (ë‹¨ì¼ podì—ëŠ” ë³´í†µ ì‚¬ìš© X) |

#### ğŸ“‹ ì¶œë ¥ ì •ë³´ ì„¤ëª…
* kubectl describe pod mynginx ì¶œë ¥ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ê°€ í¬í•¨
| í•­ëª©                      | ì„¤ëª…                                   |
| ----------------------- | ------------------------------------ |
| `Name`, `Namespace`     | íŒŒë“œ ì´ë¦„ ë° ë„¤ì„ìŠ¤í˜ì´ìŠ¤                       |
| `Node`                  | íŒŒë“œê°€ ì‹¤í–‰ ì¤‘ì¸ ë…¸ë“œ ì´ë¦„                      |
| `Labels`, `Annotations` | íŒŒë“œì— ë¶™ì€ ë©”íƒ€ë°ì´í„°                         |
| `Status`                | Running, Pending, CrashLoopBackOff ë“± |
| `IP`, `Pod IP`          | í´ëŸ¬ìŠ¤í„° IP ë° íŒŒë“œì˜ IP ì£¼ì†Œ                  |
| `Containers`            | ì»¨í…Œì´ë„ˆ ì´ë¦„, ì´ë¯¸ì§€, ìƒíƒœ, í¬íŠ¸                 |
| `Conditions`            | íŒŒë“œê°€ Ready ìƒíƒœì¸ì§€ ë“± í™•ì¸                  |
| `Events`                | ìŠ¤ì¼€ì¤„ë§/ë„¤íŠ¸ì›Œí¬/ì´ë¯¸ì§€ ê´€ë ¨ ì´ë²¤íŠ¸ ë¡œê·¸ (ë¬¸ì œ ì§„ë‹¨ í•µì‹¬)   |


```bash
kubectl get pod mynginx -o yaml
kubectl get pod -o wide
# NAME     READY   STATUS    RESTARTS   AGE  IP            NODE    ...
# mynginx  1/1     Running   0          6s   10.42.0.226   worker  ...
```

### ì»¨í…Œì´ë„ˆ ë¡œê¹…

```bash
kubectl logs -f mynginx
# /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will ...
# /docker-entrypoint.sh: Looking for shell scripts in /docker-...
# ...
```

### ì»¨í…Œì´ë„ˆ ëª…ë ¹ ì „ë‹¬
* ì»¨í…Œì´ë„ˆì— ì‹¤í–‰ëª…ë ¹ì„ ì „ë‹¬í•  ë•Œ **êµ¬ë¶„ì(--)**ë¡œ ì „ë‹¬í•  ëª…ë ¹ì„ êµ¬ë¶„ 

```bash
# mynginxì— apt-update ëª…ë ¹ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
kubectl exec mynginx -- apt-get update
# Get:1 http://security.debian.org/debian-security buster/updates ...
# Get:2 http://deb.debian.org/debian buster InRelease [121 kB]
# Get:3 http://deb.debian.org/debian buster-updates InRelease [51.9 kB]
# ...

kubectl exec -it mynginx -- bash

$root@mynginx:/# hostname
# mynginx

# ì»¨í…Œì´ë„ˆ exit
$root@mynginx:/# exit
```

âœ… ê¸°ë³¸ ëª…ë ¹ì–´ êµ¬ì¡°

```bash
kubectl exec [ì˜µì…˜] <pod-name> [--container <ì»¨í…Œì´ë„ˆì´ë¦„>] -- <ëª…ë ¹ì–´>
```

ğŸ§¾ ì£¼ìš” ì˜µì…˜ ì •ë¦¬

| ì˜µì…˜                       | ì„¤ëª…                                               |
| ------------------------ | ------------------------------------------------ |
| `-it` ë˜ëŠ” `--stdin --tty` | í„°ë¯¸ë„ ì—°ê²°ì„ í†µí•´ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆê²Œ í•¨ (`bash`, `sh` ë“± ì‹¤í–‰ ì‹œ í•„ìˆ˜) |
| `--container`            | íŒŒë“œ ë‚´ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ì¤‘ í•˜ë‚˜ë¥¼ ì§€ì • (ë©€í‹° ì»¨í…Œì´ë„ˆ íŒŒë“œì—ì„œ ì‚¬ìš©)          |
| `--namespace`, `-n`      | íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ ì§€ì •                                 |
| `--kubeconfig`           | ì‚¬ìš©í•  kubeconfig ê²½ë¡œ ì§€ì • (ë©€í‹°í´ëŸ¬ìŠ¤í„° ë“±)                  |
| `--stdin`                | í‘œì¤€ ì…ë ¥ ì—°ê²° (ìë™ìœ¼ë¡œ `-i` í¬í•¨ë¨)                         |
| `--tty`                  | ê°€ìƒ í„°ë¯¸ë„ ì—°ê²° (ìë™ìœ¼ë¡œ `-t` í¬í•¨ë¨)                        |
| `--env` (v1.30+)         | í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ì¼ë¶€ í™˜ê²½ë§Œ ì§€ì›ë¨)                            |

âœ… ìš”ì•½ í‘œ

| ëª©ì              | ëª…ë ¹ ì˜ˆì‹œ                                       |
| -------------- | ------------------------------------------- |
| íŒŒë“œ ë‚´ë¶€ ì‰˜ ì ‘ì†     | `kubectl exec -it mypod -- bash`            |
| íŠ¹ì • ì»¨í…Œì´ë„ˆì— ëª…ë ¹ ì‹¤í–‰ | `kubectl exec mypod -c mycontainer -- ls /` |
| ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì§€ì •      | `kubectl exec -n kube-system mypod -- ls`   |
| ê°„ë‹¨ ëª…ë ¹ ì‹¤í–‰       | `kubectl exec mypod -- uptime`              |


### ì»¨í…Œì´ë„ˆ / í˜¸ìŠ¤íŠ¸ê°„ íŒŒì¼ ë³µì‚¬

```bash
# <HOST> --> <CONTAINER>
kubectl cp /etc/passwd mynginx:/tmp/passwd

# exec ëª…ë ¹ìœ¼ë¡œ ë³µì‚¬ê°€ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
kubectl exec mynginx -- ls /tmp/passwd
# /tmp/passwd

kubectl exec mynginx -- cat /tmp/passwd
# root:x:0:0:root:/root:/bin/bash
# daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
# bin:x:2:2:bin:/bin:/usr/sbin/nologin
# ...
```

### ì»¨í…Œì´ë„ˆ ì •ë³´ ìˆ˜ì •

```bash
kubectl edit pod mynginx
# apiVersion: v1
# kind: Pod
# metadata:
#   creationTimestamp: "..."
#   labels:
#     hello: world        # <-- ë¼ë²¨ ì¶”ê°€
#     run: mynginx
#   managedFields:
#   ...
```

```bash
# mynginx ìƒì„¸ ì •ë³´ ì¡°íšŒ
kubectl get pod mynginx -oyaml
# apiVersion: v1
# kind: Pod
# metadata:
#   creationTimestamp: "..."
#   labels:
#     hello: world        # <-- ì¶”ê°€ëœ ë¼ë²¨ í•™ì¸
#     run: mynginx
#   ...
```

### 4.1.8 ì»¨í…Œì´ë„ˆ ì‚­ì œ

```bash
kubectl delete pod mynginx
# pod mynginx deleted

kubectl get pod
# No resources found ..
```


### 4.1.9 ì„ ì–¸í˜• ëª…ë ¹ ì •ì˜ì„œ (YAML) ê¸°ë°˜ì˜ ì»¨í…Œì´ë„ˆ ìƒì„±
#### kubectl apply
* ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ìƒì„± ë˜ëŠ” ì—…ë°ì´íŠ¸í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ ëª…ë ¹ì–´
```bash
# -f : -file
kubectl apply -f <íŒŒì¼ì´ë¦„.yaml>
```
#### ğŸ§¾ ì£¼ìš” ì˜µì…˜ ì •ë¦¬
| ì˜µì…˜                      | ì„¤ëª…                                                    |        |                    |
| ----------------------- | ----------------------------------------------------- | ------ | ------------------ |
| `-f`                    | ì ìš©í•  íŒŒì¼ ë˜ëŠ” ë””ë ‰í† ë¦¬                                        |        |                    |
| `-k`                    | Kustomize ë””ë ‰í† ë¦¬ ì ìš© (ë””ë ‰í† ë¦¬ì— `kustomization.yaml`ì´ ìˆì–´ì•¼ í•¨) |        |                    |
| `--record`              | ë³€ê²½ ì´ë ¥ì„ ë¦¬ì†ŒìŠ¤ì— ê¸°ë¡ (`kubectl rollout history`ì—ì„œ ì‚¬ìš©ë¨)      |        |                    |
| `--prune`               | ì´ì „ì— ì¡´ì¬í–ˆë˜ ë¦¬ì†ŒìŠ¤ ì¤‘ ì‚­ì œëœ í•­ëª© ìë™ ì œê±°                           |        |                    |
| \`--dry-run=client      | server                                                | none\` | ì‹¤ì œ ì ìš© ì—†ì´ ê²°ê³¼ë¥¼ ë¯¸ë¦¬ ë³´ê¸° |
| `--validate=true/false` | YAMLì˜ ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„± ê²€ì‚¬ ì—¬ë¶€                                   |        |                    |
| `--force-conflicts`     | ì¶©ëŒ ê°•ì œ ì ìš© (server-side apply ì „ìš©)                       |        |                    |
| `--field-manager`       | ì„œë²„ ì‚¬ì´ë“œ ë³€ê²½ ê¸°ë¡ì„ ìœ„í•œ ì‹ë³„ì ì§€ì • (default: kubectl)            |        |                    |

#### ğŸ” kubectl apply vs kubectl create vs kubectl run
| í•­ëª©           | `kubectl apply`               | `kubectl create`        | `kubectl run`                               |
| ------------ | ----------------------------- | ----------------------- | ------------------------------------------- |
| ëª©ì            | **ì„ ì–¸ì  ìƒì„± ë° ì—…ë°ì´íŠ¸**             | ì„ ì–¸ì  **ì´ˆê¸° ìƒì„±** ì „ìš©        | **ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰** (ì„ì‹œ pod or deployment ìƒì„±)     |
| ë¦¬ì†ŒìŠ¤ í˜•ì‹       | YAML/JSON í•„ìš”                  | YAML/JSON í•„ìš”            | ëª…ë ¹ì–´ ê¸°ë°˜ (YAML ë¶ˆí•„ìš”)                           |
| ì¤‘ë³µ ì ìš© ì‹œ      | ì—…ë°ì´íŠ¸ë¨ (íŒ¨ì¹˜)                    | ì—ëŸ¬ ë°œìƒ (`AlreadyExists`) | ì‹¤í–‰ë¨ (ë‹¨, í˜•íƒœê°€ ë‹¤ë¦„)                             |
| ì—…ë°ì´íŠ¸ ê°€ëŠ¥      | âœ… ê°€ëŠ¥                          | âŒ ë¶ˆê°€ (ì‚­ì œ í›„ ì¬ìƒì„±)         | ì œí•œì                                          |
| ì‹¤ë¬´ ì‚¬ìš©ë„       | **ê°€ì¥ ë§ì´ ì‚¬ìš©ë¨** (CI/CD, GitOps) | ì´ˆê¸° ë¦¬ì†ŒìŠ¤ ìƒì„±ì— ì‚¬ìš©           | í…ŒìŠ¤íŠ¸ìš©, ë¹ ë¥¸ ë””ë²„ê¹…                                |
| ì‚¬ìš© ë°©ì‹        | ì„ ì–¸í˜•                           | ì„ ì–¸í˜•                     | ëª…ë ¹í˜•                                         |
| ë””í”Œë¡œì´ë¨¼íŠ¸ ìƒì„± ì—¬ë¶€ | YAMLì— ë”°ë¼ ë‹¤ë¦„                   | YAMLì— ë”°ë¼ ë‹¤ë¦„             | ê¸°ë³¸ì ìœ¼ë¡œ Deployment ìƒì„± (`--restart=Always` ê¸°ë³¸) |


#### ğŸ“ ì‹¤ë¬´ íŒ
* CI/CDì—ì„œëŠ” ëŒ€ë¶€ë¶„ kubectl apply ì‚¬ìš©
* GitOps(ì˜ˆ: ArgoCD, Flux) ëª¨ë¸ì—ì„œë„ applyì™€ ìœ ì‚¬í•œ ì„ ì–¸í˜• ë°©ì‹ ì‚¬ìš©
* ë³€ê²½ ì´ë ¥ì„ ë³´ê³  ì‹¶ë‹¤ë©´ --record ë° kubectl rollout history í™œìš©

#### ì‹¤ìŠµ


```yaml
# mynginx.yaml
apiVersion: v1
kind: Pod
metadata:
  name: mynginx
spec:
  containers: 
  - name: mynginx
    image: nginx
```

```bash
ls
# mynginx.yaml

kubectl apply -f mynginx.yaml
# pod/mynginx created

kubectl get pod 
# NAME      READY   STATUS      RESTARTS   AGE
# mynginx   1/1     Running     1          6s

kubectl get pod mynginx -oyaml
# apiVersion: v1
# kind: Pod
# metadata:
#   ...
#   name: mynginx
#   ...
# spec:
#   containers:
#   - image: nginx
#     name: mynginx
#   ...
```

##### internet yaml íŒŒì¼ ì ìš©
* apply ëª…ë ¹ì˜ ì¥ì ì€ ì¸í„°ë„· íŒŒì¼ì‹œìŠ¤í…œì— ìœ„ì¹˜í•œ yamlíŒŒì¼ ì‚¬ìš©ê°€ëŠ¥
```bash
kubectl apply -f https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/pods/simple-pod.yaml
# pod/nginx created

kubectl delete -f https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/pods/simple-pod.yaml
# pod/nginx deleted
```

##### mynginx.yaml ìˆ˜ì •
* pod/mynginx configured <- ìˆ˜ì •
* pod/mynginx unchanged  <- ë³€ê²½ì—†ì„ ê²½ìš°

```yaml
# vi mynginx.yaml
apiVersion: v1
kind: Pod
metadata:
  labels:
    hello: world          # <-- ë¼ë²¨ ì¶”ê°€
  name: mynginx
spec:
  containers: 
  - name: mynginx
    image: nginx:1.17.2   # <-- ê¸°ì¡´ latestì—ì„œ 1.17.2ë¡œ ë³€ê²½
```

```bash
kubectl apply -f mynginx.yaml
# pod/mynginx configured

kubectl apply -f mynginx.yaml
# pod/mynginx unchanged

kubectl get pod 
kubectl get pod mynginx -oyaml

```

## 4.2 ê³ ê¸‰ ëª…ë ¹

### 4.2.1 ë¦¬ì†ŒìŠ¤ë³„ ëª…ë ¹


### 4.2.1 ë¦¬ì†ŒìŠ¤ë³„ ëª…ë ¹
* ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ëª¨ë“  ê²ƒì´ ë¦¬ì†ŒìŠ¤ë¡œ í‘œí˜„
* ë¦¬ì†ŒìŠ¤ ì¢…ë¥˜ëŠ” pod, service, ReplicaSet, Deploymentë“±ì´ ìˆë‹¤.

```bash
kubectl get service
kubectl describe service kubernetes
kubectl get node

# node ì‚­ì œ
kubectl delete node <ë…¸ë“œëª…>

kubectl describe node master
```

### 4.2.2 ë„¤ì„ìŠ¤í˜ì´ìŠ¤
* ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ **ë„¤ì„ìŠ¤í˜ì´ìŠ¤(namespace)**ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ ì£¼ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.
* í•˜ë‚˜ì˜ í´ëŸ¬ìŠ¤í„° ì•ˆì— ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ê°€ìƒ í™˜ê²½ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

#### âœ… ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë€?
* ë¦¬ì†ŒìŠ¤ì˜ ë…¼ë¦¬ì ì¸ ê²©ë¦¬ ë‹¨ìœ„
* í•˜ë‚˜ì˜ í´ëŸ¬ìŠ¤í„° ì•ˆì— ì—¬ëŸ¬ ì‚¬ìš©ì, í”„ë¡œì íŠ¸, íŒ€ì„ ë¶„ë¦¬ ê´€ë¦¬ ê°€ëŠ¥
* ë¦¬ì†ŒìŠ¤ ì´ë¦„ ì¶©ëŒ ë°©ì§€ (ê°™ì€ ì´ë¦„ì˜ íŒŒë“œë¼ë„ ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì¡´ì¬ ê°€ëŠ¥)
* RBAC(ê¶Œí•œ), ë¦¬ì†ŒìŠ¤ ì¿¼í„°, ë„¤íŠ¸ì›Œí¬ ì •ì±… ë“±ê³¼ í•¨ê»˜ ì‚¬ìš©ë¨

#### ğŸ§¾ ê¸°ë³¸ ì œê³µ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
| ë„¤ì„ìŠ¤í˜ì´ìŠ¤            | ì„¤ëª…                                                     |
| ----------------- | ------------------------------------------------------ |
| `default`         | ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤. ë³„ë„ ì§€ì • ì—†ìœ¼ë©´ ì—¬ê¸°ì— ìƒì„±ë¨                           |
| `kube-system`     | ì¿ ë²„ë„¤í‹°ìŠ¤ **ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸**ê°€ ì‹¤í–‰ë˜ëŠ” ê³µê°„ (ì˜ˆ: CoreDNS, kube-proxy ë“±) |
| `kube-public`     | **ì „ì²´ ì‚¬ìš©ìì—ê²Œ ì½ê¸° ê°€ëŠ¥í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤**. ë¶€íŠ¸ìŠ¤íŠ¸ë© ì •ë³´ ê³µìœ ìš©               |
| `kube-node-lease` | ë…¸ë“œ ìƒíƒœ heartbeat ê´€ë¦¬ì— ì‚¬ìš© (ë…¸ë“œ ìƒíƒœ ìµœì í™”)                     |

#### âœ… ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ í•„ìš”í•œ ì´ìœ 
| í•„ìš”ì„±       | ì„¤ëª…                                   |
| --------- | ------------------------------------ |
| íŒ€/í”„ë¡œì íŠ¸ ë¶„ë¦¬ | ì˜ˆ: dev, staging, prod ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë¶„ë¦¬ ìš´ì˜   |
| ë¦¬ì†ŒìŠ¤ ê²©ë¦¬    | ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§ˆë‹¤ ì¿¼í„°, ì œí•œ, ì •ì±… ì„¤ì • ê°€ëŠ¥            |
| ì´ë¦„ ì¤‘ë³µ í—ˆìš©  | ê°™ì€ ì´ë¦„ì˜ ì„œë¹„ìŠ¤ë‚˜ íŒŒë“œë¼ë„ ì„œë¡œ ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì¡´ì¬ ê°€ëŠ¥ |
| ê¶Œí•œ ê´€ë¦¬     | RBACê³¼ ì—°ë™í•´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ ì ‘ê·¼ ì œì–´ ê°€ëŠ¥           |


```bash
kubectl get namespace
kubectl describe namespace kube-system

# ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— nginx ì´ë¯¸ì§€ë¡œ íŒŒë“œ(pod)ë¥¼ ìƒì„±í•˜ëŠ” ëª…ë ¹ìœ¼ë¡œ, 
# kube-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— mynginx-nsë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‹¤í–‰
kubectl run mynginx-ns --image nginx --namespace kube-system
# pod/mynginx-ns created

# kube-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ Pod í™•ì¸
kubectl get pod mynginx-ns -n kube-system  # --namespaceë¥¼ -në¡œ ì¶•ì•½ ê°€ëŠ¥

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ í™•ì¸
kubectl get pods -n kube-system

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë””í”Œë¡œì´ë¨¼íŠ¸ í™•ì¸
kubectl get deployments -n kube-system

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ podìƒì„¸ ì„¤ëª…
kubectl describe pod mynginx-ns -n kube-system

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ
kubectl delete pod mynginx-ns -n kube-system
# pod/mynginx-ns deleted

kubectl get pod -n default

kubectl get pod
```

### 4.2.3 ìë™ì™„ì„± ê¸°ëŠ¥
* https://kubernetes.io/docs/tasks/tools/install-kubectl/#enabling-shell-autocompletion

```bash
echo 'source <(kubectl completion bash)' >> ~/.bashrc
source ~/.bashrc
```

```bash
kubectl run yournginx --image nginx
# pod/yournginx created
```

```bash
kubectl get pod <TAB>
# mynginx     yournginx
```

### 4.2.4 ì¦‰ì„ ë¦¬ì†ŒìŠ¤ ìƒì„± 
* cat << EOF	EOF ë¼ëŠ” ë¬¸ìì—´ì´ ë‚˜ì˜¬ ë•Œê¹Œì§€ ì…ë ¥ì„ ë°›ìŠµë‹ˆë‹¤ (ì—¬ê¸°ì„  YAML ì •ì˜ë¥¼ ì…ë ¥)

```bash
# ì¦‰ì„ì—ì„œ YALM ë¬¸ì„œë¥¼ ìƒì„±í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ê²Œ ì „ë‹¬
cat << EOF | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: cat-nginx
spec:
  containers:
  - image: nginx
    name: cat-nginx
EOF
# pod/cat-nginx created
```

### 4.2.5 ë¦¬ì†ŒìŠ¤ íŠ¹ì • ì •ë³´ ì¶”ì¶œ
#### âœ… jsonpathë€?
* SON ë°ì´í„°ë¥¼ ì¿¼ë¦¬í•˜ëŠ” ê²½ë¡œ ê¸°ë°˜ ì–¸ì–´
* kubectl get ... -o jsonpath="{ê²½ë¡œ}" í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©
* ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ ë‚´ë¶€ì˜ íŠ¹ì • í•„ë“œ ê°’ë§Œ ì¶”ì¶œí•  ìˆ˜ ìˆìŒ
* `jsonpath`ì— ëŒ€í•œ ìƒì„¸ ì‚¬ìš©ë²• ì°¸ê³  : https://kubernetes.io/docs/reference/kubectl/jsonpath/

```bash
kubectl get node master -o yaml
kubectl get node master -o wide

kubectl get node master -o jsonpath="{.status.addresses[0].address}"
# 10.0.1.1
```
#####ğŸ§¾ ìƒì„¸ êµ¬ì„± ì„¤ëª…
| êµ¬ì„± ìš”ì†Œ                            | ì˜ë¯¸                                     |
| -------------------------------- | -------------------------------------- |
| `kubectl get node master`        | `master`ë¼ëŠ” ë…¸ë“œì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤               |
| `-o jsonpath=...`                | ê²°ê³¼ë¥¼ JSON Path í˜•ì‹ìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ ì¶œë ¥             |
| `{.status.addresses[0].address}` | ë…¸ë“œì˜ `status.addresses` ë°°ì—´ì˜ ì²« ë²ˆì§¸ ì£¼ì†Œë¥¼ ì¶œë ¥ |


### 4.2.6 ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì¡°íšŒ
#### ğŸ” ì£¼ìš” ë¦¬ì†ŒìŠ¤ ì˜ˆì‹œ
| ë¦¬ì†ŒìŠ¤           | ì•½ì–´       | kind       | ì„¤ëª…                 |
| ------------- | -------- | ---------- | ------------------ |
| `pods`        | `po`     | Pod        | ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë‹¨ìœ„         |
| `services`    | `svc`    | Service    | íŒŒë“œ ê°„ í†µì‹  ë° ë¡œë“œë°¸ëŸ°ì‹±    |
| `deployments` | `deploy` | Deployment | íŒŒë“œ ìë™ ë°°í¬ ë° ê´€ë¦¬      |
| `configmaps`  | `cm`     | ConfigMap  | ì„¤ì • ë°ì´í„°ë¥¼ í‚¤-ê°’ í˜•íƒœë¡œ ì €ì¥ |
| `secrets`     | `sec`    | Secret     | ì•”í˜¸í™”ëœ ë°ì´í„° ì €ì¥        |
| `nodes`       | `no`     | Node       | ì›Œì»¤ ë…¸ë“œ ì •ë³´           |
| `namespaces`  | `ns`     | Namespace  | í´ëŸ¬ìŠ¤í„° ë¦¬ì†ŒìŠ¤ ë¶„ë¦¬ ë‹¨ìœ„     |


```bash
kubectl api-resources
kubectl api-resources --namespaced=true 
```

### 4.2.7 ë¦¬ì†ŒìŠ¤ ì„¤ëª…
* kubectl explain pods ëª…ë ¹ì–´ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ êµ¬ì¡°ì™€ í•„ë“œ ì„¤ëª…ì„ ë³´ì—¬ì£¼ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
* ì¦‰, Pod ë¦¬ì†ŒìŠ¤ì˜ êµ¬ì¡°ë¥¼ íƒìƒ‰í•˜ë©° YAMLì˜ ê° í•­ëª©ì´ ë¬´ìŠ¨ ì˜ë¯¸ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ ì¤ë‹ˆë‹¤.
#### ğŸ”„ ìš”ì•½
| ëª…ë ¹ì–´                                          | ëª©ì             |
| -------------------------------------------- | ------------- |
| `kubectl explain pods`                       | íŒŒë“œ ë¦¬ì†ŒìŠ¤ ì „ì²´ ì„¤ëª…  |
| `kubectl explain pods.spec`                  | ìŠ¤í™ í•„ë“œ ì„¤ëª…      |
| `kubectl explain pods.spec.containers`       | ì»¨í…Œì´ë„ˆ ì„¤ì • êµ¬ì¡° ì„¤ëª… |
| `kubectl explain pods.spec.containers.image` | ì´ë¯¸ì§€ í•„ë“œ ì„¤ëª…     |

```bash
# Podì— ëŒ€í•œ ì •ì˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
kubectl explain pods
```

### 4.2.8 í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸ 

```bash
# ì¿ ë²„ë„¤í‹°ìŠ¤ APIì„œë²„ ì‘ë™ ì—¬ë¶€ í™•ì¸
kubectl cluster-info

# ì „ì²´ ë…¸ë“œ ìƒíƒœ í™•ì¸
kubectl get node

# ì¿ ë²„ë„¤í‹°ìŠ¤ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì˜ Pod ìƒíƒœ í™•ì¸
kubectl get pod -n kube-system
```

### 4.2.9 í´ë¼ì´ì–¸íŠ¸ ì„¤ì •íŒŒì¼
*  kubectlì´ ì‚¬ìš©í•˜ëŠ” í´ëŸ¬ìŠ¤í„° ì ‘ì† ì„¤ì •(config) ì •ë³´ë¥¼ í™•ì¸

#### ğŸ§¾ ì£¼ìš” í•­ëª© ì„¤ëª…
| í•­ëª©                | ì„¤ëª…                                            |
| ----------------- | --------------------------------------------- |
| `clusters`        | ì ‘ì† ê°€ëŠ¥í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ëª©ë¡                          |
| `contexts`        | ì–´ë–¤ í´ëŸ¬ìŠ¤í„°ì— ì–´ë–¤ ì‚¬ìš©ìë¡œ ì ‘ì†í• ì§€ ì§€ì •í•œ ì„¤ì •                  |
| `current-context` | í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ context (ì¦‰, ì–´ë–¤ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€)       |
| `users`           | ì¸ì¦ ì •ë³´ (ì˜ˆ: í† í°, ì¸ì¦ì„œ ë“±)                          |
| `server`          | API ì„œë²„ ì£¼ì†Œ (ì˜ˆ: `https://192.168.164.130:6443`) |

#### âœ… ê´€ë ¨ ëª…ë ¹ì–´| ëª…ë ¹ì–´                               | ì„¤ëª…                   |
| --------------------------------- | -------------------- |
| `kubectl config get-contexts`     | ë“±ë¡ëœ ëª¨ë“  context ëª©ë¡ í™•ì¸ |
| `kubectl config current-context`  | í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ context í™•ì¸  |
| `kubectl config use-context [ì´ë¦„]` | ë‹¤ë¥¸ contextë¡œ ì „í™˜       |
| `kubectl config set-context`      | context ìˆ˜ë™ ì„¤ì •        |
| `kubectl config set-cluster`      | í´ëŸ¬ìŠ¤í„° ì •ë³´ ë“±ë¡           |
| `kubectl config set-credentials`  | ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë“±ë¡         |


```bash
kubectl config view
cat $HOME/.kube/config
```

### 4.2.10 `kubectl` ëª…ë ¹ ì¹˜íŠ¸ì‹œíŠ¸
* https://kubernetes.io/docs/reference/kubectl/cheatsheet/
><img src="./images/kubernets install/KUBERNETES-Cheat-Sheet-2022.webp" width="800" height="600">



### Clean Up

```bash
kubectl delete pod --all
```